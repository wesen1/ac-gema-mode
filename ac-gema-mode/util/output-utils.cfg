//
// @author wesen
// @copyright 2020 wesen <wesen-ac@web.de>
//

//
// Output utils module for ac-gema-mode
//
// Provides various output related util functions.
//

persistidents 0;


// Constants

//
// A temporary replacement for whitespaces that should be used to modify strings that contain
// whitespaces before adding them to a list.
// This is just a character that is non printable and thus can be safely assumed to not be contained in any of
// the list item strings.
//
// @var string $TEMPORARY_WHITESPACE
//
const TEMPORARY_WHITESPACE = "Ã¤";


// Public Functions

//
// Generates a output list from a given list of strings.
//
// @param string[] listItems ($arg1) The list items
// @param string itemSeparator ($arg2) The item separator (e.g. ", ")
// @param string lastItemSeparator ($arg3) The separator between the second and last item (optional, Default: $arg2)
//
// @return string The generated output list
//
const generateOutputList [

  listItems = $arg1;
  itemSeparator = $arg2;

  if (= $numargs 3) [
    lastItemSeparator = $arg3;
  ][
    lastItemSeparator = $itemSeparator;
  ]

  outputList = "";
  numberOfEntries = (listlen $listItems);
  currentEntryNumber = 0;

  looplist $listItems listItem [
    ++ currentEntryNumber;

    // Append the item separator if required
    if (> $currentEntryNumber 1) [
      if (= $currentEntryNumber $numberOfEntries) [
        outputList = (concatword $outputList $lastItemSeparator);
      ][
        outputList = (concatword $outputList $itemSeparator);
      ]
    ]

    // Append the item
    outputList = (concatword $outputList $listItem);
  ]

  return (strreplace $outputList $TEMPORARY_WHITESPACE " ");

]
